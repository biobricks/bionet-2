<create-part>
  <content-container style="padding-top:165px;">
    <section-container>
      <div id="create-part-content" class="{theme.style.color.background} {theme.style.color.text}">
        <create-name/>
      </div>
    </section-container>
  </content-container>
  <script>
    sudocms.addRouteDestination('createPart', 'name', function(formData) {
      //console.log('create part name:', JSON.stringify(formData))
      riot.mount('div#create-part-content', 'create-name')
    })
    sudocms.addRouteDestination('createPart', 'specifications', function(formData) {
      //console.log('create part specifications:', JSON.stringify(formData))
      riot.mount('div#create-part-content', 'create-specifications')
    })
    sudocms.addRouteDestination('createPart', 'sequence', function(formData) {
      //console.log('create part sequence:', JSON.stringify(formData))
      riot.mount('div#create-part-content', 'create-sequence')
    })
    sudocms.addRouteDestination('createPart', 'instance', function(formData) {
      //console.log('create part instance:', JSON.stringify(formData))
      riot.mount('div#create-part-content', 'create-instance')
    })

  </script>
</create-part>

<create-name>
  <div style="height:60px" />
  <form class="col center">
    <form-text-input-empty label="Part Name" name="partName" value={formData.name} />
    <std-button action={createAction} label="create part" />
  </form>
  <script>
    self.formData = sudocms.getModel('createPart')
    self.createAction = function() {
      const partData = JSON.parse(JSON.stringify(self.formData))
      partData.name = self.partName.value
      sudocms.route('partDataAccessor', 'storeClass', 'toSearchItem', partData)
      sudocms.route('createPart', 'specifications', undefined, partData)
    }

  </script>
</create-name>

<create-specifications>
  <form-container>
    <form-text-input label="Part Name" name="partName" value={formData.name}/>
    <form-textarea-input label="Description" name="description" value={formData.description}/>
    <form-text-input label="Created by" name="creator" value={formData.creator}/>
    <form-text-input label="Created" name="created" value={formData.created}/>
    <form-text-input label="Storage temperature" name="temperature" value={formData.temperature}/>
    <form-textarea-input label="Biosafety level" name="bsl" value={formData.bsl}/>
    <form-switch label="Biohazardous?" name="biohazard" value={formData.biohazard} options={[ 'No', 'Yes']}/>
    <form-image imagesrc={formData.avatar} label="Avatar" height="60px" />
    <form-text-input label="" name="avatar" value={formData.avatar}/>
    <std-button action={submitForm} label="submit" />
  </form-container>
  <script>
    self.formData = sudocms.getModel('createPart')
    self.submitForm = function() {
      const partData = JSON.parse(JSON.stringify(self.formData))
      partData.name = self.partName.value
      partData.description = self.description.value
      partData.creator = self.creator.value
      partData.temperature = self.temperature.value
      partData.bsl = self.bsl.value
      partData.biohazard = self.biohazard.value
      partData.created = self.created.value
      partData.avatar = self.avatar.value
      sudocms.route('partDataAccessor', 'storeClass', 'toSearchItem', partData)
      sudocms.route('createPart', 'sequence', undefined, partData)
    }

  </script>
</create-specifications>

<create-sequence>
  <form-container>
    <form-textarea-input label="DNA Sequence" name="sequence" value={formData.sequence}/>
    <std-button action={submitForm} label="submit" />
  </form-container>
  <script>
    self.formData = sudocms.getModel('createPart')
    self.submitForm = function() {
      const partData = JSON.parse(JSON.stringify(self.formData))
      partData.sequence = self.sequence.value
      console.log('create sequence:', JSON.stringify(partData))
      sudocms.route('partDataAccessor', 'storeClass', 'toSearchItem', partData)
      sudocms.route('createPart', 'instance', undefined, self.formData)
    }

  </script>
</create-sequence>

<create-instance>
  <form-container>
    <form-text-input label="Physical Location Code" name="location" value={formData.location}/>
    <form-text-input label="Datamatrix Code" name="datamatrix" value={formData.qrcode}/>
    <form-image imagesrc={formData.qrcode} label="Datamatrix code" height="140px" />
    <std-button action={submitForm} label="submit" />
  </form-container>
  <script>
    self.formData = sudocms.getModel('createPart')
    self.submitForm = function() {
      const partData = JSON.parse(JSON.stringify(self.formData))
      partData.location = self.location.value
      partData.datamatrix = self.datamatrix.value
      console.log('create instance:', JSON.stringify(partData))
      sudocms.route('partDataAccessor', 'storeClass', 'toSearchItem', partData)
    }

  </script>
</create-instance>
