<settings>
  <div id="settings-slideout2" class="side-nav" style="position:fixed;top:0px;width:300px;z-index:9999">
    <close-button action={closeSettings} color='black' />
    <div style="margin-left:16px">
      <div style="margin-top:48px" />
      <form-switch onmouseup={configureColorScheme} label="Color:" name="colorSettings" value={colorSettingsInit} options={[ 'Light', 'Dark']}/>
      <form-image imagesrc="static/images/std-theme.png" label="Theme:" height="200px" />
      <div class="center">bionet</div><br/>
    </div>
    <div if={loggedin}>
      <div class="divider"></div>
      <div style="margin-left:16px;margin-top:20px">
        <div class="center">account settings</div>
        <form-text-input label="password" name="password1a" value={password1}/>
        <form-text-input label="enter password again" name="password2a" value={password2}/>
        <std-button action={updateAccountSettings} label="update account" />
      </div>
    </div>
  </div>
  <script>
    const tag = this
    self.theme = sudocms.getTheme()
    self.loggedin = sudocms.getLoginState()
    const settings = sudocms.getSettings()
    
    self.colorSettingsInit = (settings.colorScheme==='light') ? false : true
    self.password1 = ''
    self.password2 = ''
    self.closeSettings = function() {
      $('#settings-slideout').sideNav('hide');
    }

    self.configureColorScheme = function(e) {
      var checkedValue = $('#colorSettings:checked').is(":checked");
      var colorScheme=(checkedValue) ? 'light' : 'dark'
      sudocms.putSetting({
        setting:'colorScheme',
        value:colorScheme
      })
    }

    self.updateAccountSettings = function() {}
    this.on('before-mount', function() {
      //console.log('mpassword-form mount')
      observer = sudocms.addObserver(sudocms.$.loginState, function(loginState) {
        self.loggedin = loginState
        tag.update()
      })
    })

    //<div class="{theme.style.color.background}" style="margin:0;padding:10px">

  </script>
</settings>

<settings-button>
  <li><a id="settings-slideout" data-activates="settings-slideout2"><i class="material-icons left grey-text">settings</i></a></li>
</settings-button>
