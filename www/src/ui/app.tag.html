<app>
    <appbar/>
    <div id="content-container" class="{theme.style.color.background} {theme.style.color.text}" style="margin-left:125px;">
        <div class="contentHeight">
            <div id="content" class="{theme.style.color.background+' '+theme.style.color.text}" />
        </div>
    </div>
    <div style="height:48px"></div>
    <!--  <footer-tag background={theme.style.color.highlightBackground} /> -->
    <style>
        div.contentHeight {
            height:calc(100% - 100px)
        }
    </style>
    <script>
        const tag = this
        this.theme = app.getTheme()
        $('body').addClass(this.theme.style.color.background);

        app.observe(app.$.theme, function(theme) {
            // TODO theming should be done by loading and unloading css files (or sets of styles)
            $('body').removeClass(tag.theme.style.color.background)
            $('body').addClass(tag.theme.style.color.background)
            tag.update();
        });

        console.log('app tag initialization')
        var observer = {}
        this.on('before-mount', function() {
            observer = app.addObserver(app.$.theme, function(theme) {
                this.theme = theme
                tag.update()
            })
        })
        this.on('mount', function() {
            $('#content-container').css('display', 'none')
            $('#content-container').fadeIn(300)
        })
        this.on('before-unmount', function() {
            $('#content-container').fadeOut(300)
        })
        this.on('unmount', function() {
            app.removeObserver(app.$.theme, observer)
        })

    </script>
</app>
